[toc]

# 网络基础

## 网络的相关概念

### 网络通信

- 概念：两台设备之间通过网络实现数据传输
- 网络通信：将数据通过网络从一台设备传输到另一台设备
- `java.net` 包下提供了一系列的类或接口，供程序员使用，完成网络通信

### 什么是网络

- 概念

  **两台或多台设备通过一定物理设备连接起来构成了网络**

- 根据网络的覆盖范围不同，对网络进行分类

  - 局域网：覆盖范围最小，仅仅覆盖一个教室或一个机房
  - 城域网：覆盖范围较大，可以覆盖一个城市
  - 广域网：覆盖范围最大，可以覆盖全国，甚至全球，万维网是广域网的代表

### IP 地址

- 概念

  **用于唯一标识网络中的每台计算机 / 主机**

- 查看 IP 地址：`ipconfig `

- IP 地址的表示形式：点分十进制 `xx.xx.xx.xx`

- 每一个十进制数的范围：0 ~ 255

- IP 地址的组成 = 网络地址 + 主机地址，比如：`192.168.16.69`

- IPv6 是互联网工程任务组设计的用于替代 IPv4 的下一代协议，其地址数量号称可以为全世界的每一粒沙子编上一个地址

- 用于 IPv4 最大的问题在于网络地址资源有限，严重制约了互联网的应用和发展。IPv6 的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍

  **IPv4：四个字节 ( 32位 ) 来表示，一个字节的范围是 0 ~ 255**

  **IPv6：使用 16个字节 ( 128 位 ) 表示地址**

  - 冒分十六进制表示法

    **格式为 X : X : X : X : X : X : X : X, 其中每个 X 表示地址中的 16 bit， 以十六进制表示，**

    **例如：ABCD : EF01 : 2345 : 6789 : ABCD : EF01 : 2345 : 6789, 这种表示法中，每个 X 的前导 0 可以省略，**

    **例如：2001 : 0DB8 : 0000 : 0023 : 0008 : 0800 : 200C : 417A	--->	2001 : DB8 : 0 : 23 : 8 : 800 : 200C : 417A**

  - 0 位压缩表示法

    **在某些情况下，一个 IPv6 地址中间可能包含很长的一段 0，可以把连续的一段 0 压缩为 : :，但为保证地址解析的唯一性，地址中 : :，只能出现一次，**

    **例如：**

    **EF01 : 0 : 0 : 0 : 0 : 0 : 0 : 1101	--->	EF01 : : 1101**

    **0 : 0 : 0 : 0 : 0 : 0 : 0 : 1	--->	: : 1**

    **0 : 0 : 0 : 0 : 0 : 0 : 0 : 0	--->	: :**

  - 内嵌 IPv4 地址表示法

    **为了实现 IPv4 - IPv6 互通，IPv4 地址会嵌入 IPv6 地址中，此时地址常表示为：X : X : X : X : X : X : d.d.d.d，前 96bit 采用冒分十六进制表示，而最后 32bit 地址则使用 IPv4 的点分十进制表示，**

    **例如：: : 192.168.0.1 与 : : FFFF : 192.168.0.1 就是两个典型的例子，注意在前面**

#### IPv4 地址分类

| 类型 |                                                              | 范围                         |
| ---- | ------------------------------------------------------------ | ---------------------------- |
| A类  | 使用 1 个字节, 第一个 0 是固定的，剩余 7 位表示网络号， 剩余 3 个字节表示主机号 | 0.0.0.0 到 127.255.255.255   |
| B类  | 使用 2 个字节,1 0 是固定的，剩余 14 位表示网络号， 剩余 2 个字节表示主机号 | 128.0.0.0 到 191.255.255.255 |
| C类  | 使用 3 个字节, 1 1 0 是固定的，剩余 21 位表示网络号， 剩余 1 个字节表示主机号 | 192.0.0.0 到 223.255.255.255 |
| D类  | 1 1 1 0 是固定的， 剩余 28 位表示多播组号                    | 224.0.0.0 到 239.255.255.255 |
| E类  | 1 1 1 1 0 是固定的， 剩余 27 位留待后用                      | 240.0.0.0 到 247.255.255.255 |

  **特殊的：127.0.0.1 表示本机地址**

### 域名

1. `www.baidu.com`
2. 好处：为了方便记忆，解决记 ip 的困难
3. 概念：将 ip 地址映射成域名

### 端口号

1. 概念：用于标识计算机上某个特定的网络程序
2. 表示形式：以整数形式，范围 0 ~ 65535【2个字节表示端口 0 ~ 2^16 - 1】
3. 0 ~ 1024 已经被占用，比如 ssh 22, ftp 21, smtp 25, http 80
4. 常见的网络程序端口号
   - tomcat：8080
   - mysql：3306
   - oracle：1521
   - sqlserver：1433

### 网络通信协议

#### 协议 ( TCP / IP )

**TCP / IP ( Treansmission Control Protocol / Internet Protocol ) 的简写，中文译名为 传输控制协议 / 因特网互联协议，又叫网络通讯协议，这个协议是 Internet 最基本的协议、Internet 国际互联网络的基础，简单地说，就是由网络层的 IP 协议和传输层的 TCP 协议组成的**

| OSI模型 ( 理论模型，不是实际应用模型 ) |      TCP / IP模型 ( 真正应用 )       | TCP / IP模型各层对应协议  |
| :------------------------------------: | :----------------------------------: | :-----------------------: |
|                 应用层                 |                                      |                           |
|                 表示层                 |                应用层                | HTTP、ftp、telnet、DNS... |
|                 会话层                 |                                      |                           |
|                 传输层                 | 传输层 ( TCP 层，因为 TCP 使用的多 ) |       TCP、UDP、...       |
|                 网络层                 | 网络层 ( IP 层，因为 TCP 使用的多 )  |     IP、ICMP、ARP...      |
|               数据链路层               |                                      |           Link            |
|                 物理层                 |          物理 + 数据链路层           |           Link            |

#### TCP 和 UDP

- TCP 协议：传输控制协议
  1. 使用 TCP 协议前，须先建立 TCP 链接，形成传输数据通道
  2. 传输前，采用 **三次握手** 方式，是可靠的
  3. TCP 协议进行通信的两个应用进程：客户端、服务端
  4. 在连接中可进行大数据量的传输
  5. 传输完毕，需释放已建立的连接，效率低
- UDP 协议：用户数据协议
  1. 将数据、源、目的封装成数据包，不需要建立连接
  2. 每个数据包的大小限制在 64k 内，不适合传输大量数据
  3. 因无需连接，故是不可靠的，不保证对方可以接收到
  4. 发送数据结束时无需释放资源 ( 因为不是面向连接的 )，速度快
  5. 举例：厕所通知，发短信

#### Socket

##### 基本介绍

1. 套接字 ( Socket ) 开发网络应用程序被广泛采用，以至于成为事实上的标准
2. 通信的两端都要有 Socket，是两台机器间通信的端点
3. 网络通信其实就是 Socket 间的通信
4. Socket 允许程序把网络连接当成一个流，数据在两个 Socket 间通过 IO 传输
5. 一般主动发起通信的应用程序属客户端，等待通信请求的为服务端